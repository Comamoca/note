[[AIノート]]が長くなったので、もみじちゃんAIについてはこっちのページに切り分けた。
[[AIノート]]にはここに書くほどでもない断片的な知識を追記していきたい。

## もみじちゃんを生成したい

![[Pasted image 20230307185554.png]]
もみじちゃんはこんなに大きくないのでやり直し。


![[Pasted image 20230307185707.png]]
これでもまだ大きい。完全なまな板でなければならない。


![[Pasted image 20230307185824.png]]
見切れている...それよりもまだ大きい。許されない。ネガティブプロンプトも指定して完璧な絶壁にしなければならない。

![[Pasted image 20230307190043.png]]
おぉ...！見切れている＋眼鏡をしているもののかなりのまな板が板についてきた。この調子でアングルを調整したい。ネガティブプロンプトに`cut_off`を追加する。

![[Pasted image 20230307190327.png]]
良い...！いいぞ。かなり近い感じになってきた。ここからは実際のイラストと見比べて服装を寄せていく。

![[Pasted image 20230307191807.png]]
おぉ...ぉおおおお!?これはかなり近づいたのでは...!?...もみじ...ちゃん?ってなるくらいに見えるのでは!?

![[Pasted image 20230307193303.png]]
アニメの薄水色のブラウスを再現したくて色々頑張ってはいるものの、なかなか適用されない...
ただこんな感じの絵柄が安定して出てくるようになったのはでかい。

![[Pasted image 20230307201555.png]]
ふむ...全身も見てみたいので、もっかい生成

![[Pasted image 20230307201842.png]]
おぉ～まぁいい感じになってきた。ここまでのプロンプトをまとめておく

Prompt:
```
girl,  school uniform, wear_blue_blouse, long skirt, hanging_skirt, wide_suspenders, bob cut, loli, young, flat_chest, small_breasts,  red_ribbon_string, full_body_shot
```

Negative:
```
(((Blurry Eyes))), (((bad anatomy))), ((disabled body)), ((deformed body)), ((missing finger)), ((mutant hands)), ((more than five fingers)), badly drawn hands, lack of detail, (((Low resolution))), ((bad hands)), ((text)), error, cropped, low-quality image, normal quality, jpeg artifacts, signature, watermark, username, blurry, lack of details in the image, big_breasts, breasts, cut_off,  wear_glasses
```

Styles
```
girl,  bob cut, school uniform, long skirt, hanging_skirt, suspenders, loli, 
```

![[Pasted image 20230307202809.png]]
ここらで引き上げるつもりだったけど、またやりたくなってしまったのでもうちょと試してる。
ネガティブプロンプトにあったかっこは強調構文というらしく、これを使うとより強く出したい要素をモデルに伝えることができるので試している。

かっこの最大数に制限はなさそうだけど、ネガティブプロンプトも最大3つなので3つまでに抑えてたい所...

![[Pasted image 20230307203058.png]]
おぉ...きたぁー！水色のブラウス！かっこ３つめでいい感じのやつを出してくれた。

ここまでもみじちゃんみたいなイラストを生成するのを試みて来て、見た目に関してはかなり寄ってきてはいるものの絵柄はあまり似ていない。おにまいの絵柄に寄せるためにプロンプトもいじってみたものの、目に見える成果は無かった...

## モデル作るしか無いのでは...?

現状、Anythingのプロンプトでおにまい風のイラストを生成するのは厳しそうな感じがする。
そこで、ファインチューニングという方法でおにまい風のイラストを生成するAIを作ってみることを試みてみる。

![[Pasted image 20230308002926.png]]

なんやかんやあって、Colabのコンピューティングリソースを購入したので、それを使ってmomiji diffusionを作ってる。

途中で「`_C`なんとかが足りない」...というエラーがでて焦ったけど、ただ単にランタイムを再起動しろという事だった。
これは一回の学習でメモリが一杯一杯になって、メモリ不足になるかららしい。なーほーね。

Twitter:
https://twitter.com/Comamoca_/status/1633149490957017088?s=20

![[Pasted image 20230308022234.png]]
![[Pasted image 20230308022240.png]]
![[Pasted image 20230308022258.png]]
StableDiffusionでやってみた。
ほぼ同じプロンプト(girlの後にhozukimomijiをつけた程度)でも段違いで類似度が上がっている。これはどう見てももみじちゃんや...

Anythingでやったらどうなるのか気になりすぎるのでやってみる。

## AnythingでDreamArtistする
まずStable Diffusion WebUI...の拡張版**Automatic1111**を導入する。このWebUIの拡張機能にDreamArtistがあるので、それを使いたい。

ちなみにモデルのファイル形式で`ckpt`と`safetensors`というのがあって、両者とも使えるけれど、`safetensors`のほうが読み込みが速いらしい。